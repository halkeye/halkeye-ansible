---
- hosts: all
  tasks:
    - name: install ubuntu packages
      become: yes
      with_items: "{{ global_ubuntu_packages }}"
      apt:
        name: "{{ item }}"
        state: present
    - name: setup add-apt-repository
      become: yes
      when: ansible_os_family == "Debian"
      apt:
        name: software-properties-common
        state: present
    - include: playbooks/nvim.yml
    - include: playbooks/windowsdirs.yml
      when: windows_username is defined
    - include: playbooks/hub.yml
    - include: playbooks/tmux.yml
      tags:
        - tmux
  roles:
    - role: geerlingguy.nodejs
      tags:
        - nodejs
    - role: jlund.ansible-go
    - role: laggyluke.direnv
    - role: mjanser.gitconfig
    - role: wtanaka.slack
      when: windows_username is not defined
    - role: gantsign.visual-studio-code
      when: windows_username is not defined
      users:
        - username: "{{ lookup('env', 'USER') }}"
          visual_studio_code_extensions:
            - alefragnani.project-manager
            - Arjun.swagger-viewer
            - dawhite.mustache
            - dbaeumer.vscode-eslint
            - donjayamanne.githistory
            - donjayamanne.python
            - EditorConfig.EditorConfig
            - glen-84.sass-lint
            - karunamurti.haml
            - lukehoban.Go
            - msjsdiag.debugger-for-chrome
            - PeterJausovec.vscode-docker
            - rebornix.Ruby
            - RolandGreim.sharecode
            - rafaelmaiolla.remote-vscode
          visual_studio_code_settings: {
            "window.zoomLevel": 0,
            "workbench.colorTheme": "Visual Studio Dark",
            "editor.renderWhitespace": "boundary",
            "editor.autoClosingBrackets": false,
            "terminal.integrated.shell.windows": "C:\\Windows\\sysnative\\bash.exe",
            "remote.port": 52698,
            "remote.onstartup": true
          }
